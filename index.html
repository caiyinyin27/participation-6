<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elaine Tsoi – Multimedia Advertising Creator</title>
    <link href="style.css" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- 可视化相关内联样式（地图 / 饼图 / 学习经历图 / 矩阵 / 新增图表） -->
    <style>
        /* ---------- Travel Map ---------- */
        #travel-map {
            position: relative;
            margin: 3rem auto;
            width: min(75em, 100%);
        }
        #map {
            height: 70vh;
            width: 100%;
            border: 2px solid #0ff;
            border-radius: 12px;
        }
        .legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,.85);
            padding: 14px 18px;
            border: 1px solid #0ff;
            border-radius: 10px;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(0,255,255,.6);
            font-size: 15px;
            backdrop-filter: blur(5px);
            min-width: 180px;
            color: #0ff;
            font-family: 'Courier New', monospace;
            cursor: pointer;
        }
        .legend h4{
            margin: 0 0 12px;
            color:#0ff;
            text-shadow:0 0 6px #0ff;
            text-align:center;
        }
        .legend-item{
            display:flex;
            align-items:center;
            margin:8px 0;
            font-weight:500;
            transition: opacity .3s ease, transform .3s ease;
        }
        .legend-item:hover{
            transform: translateX(-2px);
        }
        .legend-item.legend-off{
            opacity: .3;
        }
        .legend-dot{
            width:14px;
            height:14px;
            border-radius:50%;
            margin-right:12px;
            border:1.5px solid #000;
            animation:pulse 2.5s infinite;
        }
        .legend-dot.purple{background:#FF00FF;box-shadow:0 0 10px #FF00FF;}
        .legend-dot.blue  {background:#00FFFF;box-shadow:0 0 10px #00FFFF;}
        .legend-dot.red   {background:#FF0000;box-shadow:0 0 10px #FF0000;}
        @keyframes pulse{
            0%,100%{box-shadow:0 0 10px currentColor;}
            50%    {box-shadow:0 0 22px currentColor;}
        }
        .custom-tooltip{
            background:rgba(0,0,0,.9)!important;
            border:1.5px solid #0ff!important;
            color:#0ff!important;
            font-family:'Courier New',monospace;
            padding:6px 10px!important;
            border-radius:6px!important;
            box-shadow:0 0 15px #0ff!important;
            font-size:14px!important;
            font-weight:bold;
            text-shadow:0 0 5px #0ff;
            backdrop-filter:blur(3px);
        }
        .leaflet-tooltip-pane .leaflet-tooltip::before{border:none!important;}
        .leaflet-container{cursor:crosshair;}

        /* ---------- Pie Chart ---------- */
        #pie-section{
            text-align:center;
            margin:3rem auto;
            width:min(75em, 100%);
        }
        #pie-chart{margin:1rem auto;}
        #pie-legend{
            display:flex;
            flex-wrap:wrap;
            gap:12px;
            justify-content:center;
            margin-top:1rem;
            font-size:14px;
        }
        #pie-legend .legend-item{
            display:flex;
            align-items:center;
            cursor: default;
        }
        #pie-legend .color{
            width:16px;
            height:16px;
            border-radius:50%;
            margin-right:6px;
        }

        /* ---------- Node-Link Diagram Wrapper ---------- */
        #learning-experience {
            margin: 4rem auto;
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 16px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.2);
            overflow: hidden;
            width: min(75em, 100%);
            position: relative;
        }
        #learning-experience h2 {
            color: #0ff;
            text-shadow: 0 0 10px #0ff;
            font-family: 'Courier New', monospace;
            margin-bottom: 1.5rem;
        }
        #learning-svg {
            background: #020617;
            border: 1px solid #0ff;
            border-radius: 12px;
            box-shadow: 0 0 25px rgba(0,255,255,0.25);
            max-width: 100%;
            height: auto;
        }
        .learning-tooltip {
            position: absolute;
            background-color: rgba(0,0,0,0.9);
            color: #0ff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            max-width: 220px;
            text-align: center;
            z-index: 1000;
            font-family: 'Courier New', monospace;
            border: 1px solid #0ff;
            text-shadow: 0 0 6px #0ff;
            backdrop-filter: blur(4px);
        }

        /* Node-link styles */
        .skill-link {
            stroke: rgba(148,163,184,0.7);
            stroke-width: 2;
        }
        .skill-node-core {
            fill: #00ffff;
            stroke: #e0f2fe;
            stroke-width: 2;
            filter: drop-shadow(0 0 10px rgba(34,211,238,0.9));
        }
        .skill-node-cluster {
            fill: #1d4ed8;
            stroke: #93c5fd;
            stroke-width: 1.8;
            filter: drop-shadow(0 0 8px rgba(59,130,246,0.9));
        }
        .skill-node-leaf {
            fill: #f97316;
            stroke: #fed7aa;
            stroke-width: 1.4;
            filter: drop-shadow(0 0 6px rgba(249,115,22,0.9));
        }
        .skill-label {
            fill: #e5e7eb;
            font-size: 11px;
            text-shadow: 0 0 6px #000;
        }

        /* Node-link legend */
        .skill-legend{
            display:flex;
            flex-wrap:wrap;
            justify-content:center;
            gap:12px;
            margin-top:1rem;
            font-size:13px;
        }
        .skill-legend-item{
            display:flex;
            align-items:center;
            background:rgba(0,255,255,0.08);
            border-radius:999px;
            padding:6px 12px;
            border:1px solid rgba(148,163,184,0.7);
            color:#e5e7eb;
        }
        .skill-legend-dot{
            width:14px;
            height:14px;
            border-radius:50%;
            margin-right:8px;
        }
        .skill-legend-dot.core{
            background:#00ffff;
            box-shadow:0 0 10px #22d3ee;
        }
        .skill-legend-dot.cluster{
            background:#1d4ed8;
            box-shadow:0 0 10px #3b82f6;
        }
        .skill-legend-dot.leaf{
            background:#f97316;
            box-shadow:0 0 10px #fb923c;
        }
        .skill-legend-line{
            width:26px;
            height:4px;
            border-radius:10px;
            margin-right:8px;
            background:linear-gradient(90deg,#9ca3af,#e5e7eb);
        }

        /* ---------- Adjacency Matrix ---------- */
        #learning-matrix {
            margin: 4rem auto;
            padding: 2rem;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            border-radius: 16px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
            color: #0ff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            width: min(75em, 100%);
            position: relative;
        }
        #learning-matrix h2 {
            text-align: center;
            color: #0ff;
            text-shadow: 0 0 10px #0ff;
            margin-bottom: 1.5rem;
        }
        .matrix-container {
            overflow-x: auto;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
        }
        #matrix-table {
            border-collapse: collapse;
            background: #020617;
            font-size: 12px;
            min-width: 700px;
            margin: 0 auto;
        }
        #matrix-table th,
        #matrix-table td {
            border: 1px solid #0ff;
            padding: 10px;
            text-align: center;
            min-width: 70px;
        }
        #matrix-table th {
            background: rgba(0, 255, 255, 0.1);
            font-weight: bold;
            color: #0ff;
            text-shadow: 0 0 5px #0ff;
            cursor: pointer;
        }
        #matrix-table td {
            color: #fff;
            font-weight: bold;
            transition: background .25s ease, transform .25s ease;
        }
        #matrix-table td.connected:hover{
            transform: scale(1.05);
        }
        .branch-node{ background: #FBBF24 !important; color: #333; }
        .connected {
            background: #00ff88 !important;
            color: #000;
            animation: pulse-glow 2s infinite;
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 5px #0f0; }
            50%      { box-shadow: 0 0 15px #0f0; }
        }
        .matrix-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-top: 1rem;
            font-size: 13px;
        }
        .matrix-legend-item {
            display: flex;
            align-items: center;
            background: rgba(0, 255, 255, 0.1);
            padding: 6px 10px;
            border-radius: 8px;
            border: 1px solid #0ff;
        }
        .legend-circle {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            border: 1.5px solid #000;
        }
        .matrix-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: #0ff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 13px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1000;
            font-weight: bold;
            text-shadow: 0 0 5px #0ff;
            backdrop-filter: blur(4px);
            border: 1px solid #0ff;
        }
        .row-highlight th,
        .row-highlight td {
            background: rgba(56,189,248,0.25) !important;
        }
        .col-highlight {
            background: rgba(244,114,182,0.22) !important;
        }
        .matrix-legend-conn {
            background: #00ff88 !important;
            color: #000;
        }

        /* ---------- 新增：广告能力统计图表 ---------- */
        #ad-bar-section,
        #ad-radar-section {
            margin: 4rem auto;
            width: min(75em, 100%);
            text-align: center;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.2);
            background: radial-gradient(circle at top, rgba(0,255,255,0.15), rgba(0,0,0,0.9));
        }
        #ad-bar-section h2,
        #ad-radar-section h2 {
            color: #0ff;
            text-shadow: 0 0 12px #0ff;
            font-family: 'Courier New', monospace;
            margin-bottom: 1.2rem;
        }
        .section-intro {
            max-width: 52rem;
            margin: 0 auto 1.5rem;
            font-size: 0.96rem;
            color: #cfd9ff;
            line-height: 1.6;
        }
        #ad-bar-chart,
        #ad-radar-chart {
            display: block;
            margin: 2rem auto 0;
            max-width: 800px;
            width: 100%;
            height: auto;
            border-radius: 14px;
            border: 1px solid rgba(0,255,255,0.4);
            box-shadow: 0 0 25px rgba(0,255,255,0.25);
            background: radial-gradient(circle at top, #07101f, #020308);
        }
        .chart-label {
            font-size: 11px;
            fill: #e5ecff;
        }
        .axis path,
        .axis line {
            stroke: rgba(255,255,255,0.2);
        }
        .axis text {
            fill: #e5ecff;
            font-size: 11px;
        }
        .radar-grid-line {
            stroke: rgba(255,255,255,0.12);
            stroke-width: 1;
        }
        .radar-axis-line {
            stroke: rgba(0,255,255,0.45);
            stroke-width: 1.3;
        }
        .radar-label {
            fill: #e5ecff;
            font-size: 11px;
            text-shadow: 0 0 6px #000;
        }
        .radar-area {
            fill: rgba(0,255,255,0.22);
            stroke: #00ffff;
            stroke-width: 2.2;
            filter: drop-shadow(0 0 10px rgba(0,255,255,0.8));
        }
        .radar-dot {
            fill: #ff00ff;
            stroke: #fff;
            stroke-width: 1;
            filter: drop-shadow(0 0 8px rgba(255,0,255,0.9));
        }

        /* ---------- Contact section ---------- */
        #contact {
            margin: 4rem auto;
            padding: 2.5rem 2rem;
            width: min(60em, 100%);
            text-align: center;
            border-radius: 16px;
            background: radial-gradient(circle at top, rgba(56,189,248,0.18), rgba(15,23,42,0.95));
            box-shadow: 0 0 30px rgba(56,189,248,0.4);
            color: #e5ecff;
        }
        #contact h2 {
            color: #0ff;
            text-shadow: 0 0 10px #0ff;
            margin-bottom: 1rem;
        }
        #contact p {
            margin: 0.4rem 0;
        }
        #contact a {
            color: #22d3ee;
            text-decoration: none;
        }
        #contact a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
<header id="top" class="reveal">
    <nav id="nav">
        <ul>
            <li><p>Elaine Tsoi</p></li>
            <li><a class="subpage" href="#about">About me</a></li>
            <li><a class="subpage" href="#data-stories">Data stories</a></li>
            <li><a class="subpage" href="mywork.html">Portfolio</a></li>
            <li><a class="subpage" href="#contact">Contact</a></li>
            <li><button id="cv" class="subpage nav-cv">CV (PDF)</button></li>
        </ul>
    </nav>

    <section class="flex-container">
        <img src="2.jpeg" alt="Portrait of Elaine Tsoi" class="tilt">
        <div class="text-container">
            <h1>Multimedia Advertising Creator</h1>
            <p class="subtitle">
                Crafting stories across visuals, brands, and emotions — from campaign planning to moving images.
            </p>
            <p>
                I am <strong>Elaine Tsoi (TSOI Yan Yan)</strong>, a Creative Media BA student at City University of
                Hong Kong, positioning myself as a <strong>Multimedia Advertising Creator</strong>. I bring together
                advertising planning, social media content, video editing, photography and simple UI design with
                a visual style that emphasises <strong>light & shadow, optimism, and human connection</strong>.
            </p>
            <p>
                This site is designed as a <strong>mock job interview portfolio</strong> for multimedia / advertising roles:
                it gives an overview of who I am, then lets you explore my data stories, travel history, and skill
                networks in more detail.
            </p>
            <p class="hero-links">
                <a class="intro_button" href="https://medium.com/@caiyinyin27" target="_blank">
                    Read my Medium articles >
                </a>
                <button id="scroll-to-data">Jump to data stories ↓</button>
            </p>
        </div>
    </section>
</header>

<main>
    <!-- ABOUT SECTION -->
    <section id="about" class="reveal">
        <h2>About Me & Target Roles</h2>
        <p>
            I am currently seeking roles such as <strong>Multimedia Advertising Intern</strong>,
            <strong>Junior Creative</strong>, or <strong>Social Media & Content Creator</strong> in agencies
            or in-house brand teams that value both strategy and visual storytelling.
        </p>
        <p>
            My core strengths include:
        </p>
        <ul class="pill-list">
            <li>Advertising planning & campaign structure</li>
            <li>Brand storytelling & copywriting</li>
            <li>Social media content planning & account operation</li>
            <li>Short-form video shooting & editing</li>
            <li>Photography: urban / street / documentary</li>
            <li>Graphic & simple UI design for campaigns</li>
        </ul>
        <p class="note">
            The visualizations below are not just decoration — they are designed as
            <strong>evidence</strong> of how I think about data, narrative, and interaction.
        </p>
    </section>

    <!-- CV PDF Section -->
    <section id="cv-section" class="reveal">
        <h2>Curriculum Vitae – Elaine Tsoi / TSOI Yan Yan</h2>
        <p class="section-intro">
            For interviewers and HR, my CV is embedded directly in the page for quick review during a
            mock job interview or real portfolio walkthrough. Click the CV button in the navigation to toggle this section.
        </p>
        <iframe
            id="cv-frame"
            src="Elaine Tsoi · CV.pdf"
            title="Elaine Tsoi CV PDF">
        </iframe>
    </section>

    <!-- DATA STORIES -->
    <section id="data-stories" class="reveal">
        <h2>Data Stories About Me</h2>
        <p class="section-intro">
            Following the principle of “overview first, details on demand”, this section gives an overview of my
            <strong>hobbies, preferences, skills, and travel</strong> through interactive visualizations.
        </p>
        <p class="section-intro">
            Each visualization focuses on one aspect of who I am — you can read it quickly in an interview context,
            but also explore tooltips and details if you want to dig deeper.
        </p>
    </section>

    <section id="vis-scatterplot" class="reveal">
        <h2>Hobbies Over the Years (Interactive Scatterplot)</h2>
        <p class="section-intro">
            This scatterplot shows how my hobbies evolved across different years — from art and dancing in earlier
            stages to filmmaking, photography, and digital media later on. It is a way to visualise how my creative
            interests converged into <strong>multimedia advertising</strong>.
        </p>
        <div id="hobbies-scatterplot"></div>
    </section>

    <!-- Advertising skills pie -->
    <section id="pie-section" class="reveal">
        <h2>My Advertising Skills (Pie Chart)</h2>
        <p class="section-intro">
            This pie chart shows how I distribute my creative
            energy across key <strong>advertising skills</strong> — from brand storytelling and social media content
            to video editing, photography, and UI / visual design.
        </p>
        <svg id="pie-chart" width="500" height="500"></svg>
        <div id="pie-legend"></div>
    </section>

    <!-- NEW: Advertising Skill Depth (Bar Chart) -->
    <section id="ad-bar-section" class="reveal">
        <h2>Advertising Skill Depth (Bar Chart)</h2>
        <p class="section-intro">
            This bar chart shows how confident I am in each advertising-related area on a scale from 0 to 10.
            It highlights my strengths in <strong>strategy, storytelling, social media, and video advertising</strong>.
        </p>
        <svg id="ad-bar-chart"></svg>
    </section>

    <!-- NEW: Creative vs Strategic Profile (Radar Chart) -->
    <section id="ad-radar-section" class="reveal">
        <h2>Creative vs Strategic Profile (Radar Chart)</h2>
        <p class="section-intro">
            This radar chart shows how I balance <strong>strategic thinking</strong> and <strong>creative execution</strong>
            across six dimensions: strategy, concept, execution, data, collaboration and presentation.
        </p>
        <svg id="ad-radar-chart"></svg>
    </section>

    <!-- NEW Matrix -->
    <section id="learning-matrix" class="reveal">
        <h2>Projects × Skills (Adjacency Matrix)</h2>
        <p class="section-intro">
            This matrix shows which <strong>skills</strong> were used in each of my key <strong>projects</strong>.
            Hover a glowing square to see the pair, or click a row / column label to highlight connections.
        </p>
        <div class="matrix-container">
            <div id="matrix-container"></div>
        </div>
        <div class="matrix-legend">
            <div class="matrix-legend-item">
                <div class="legend-circle matrix-legend-conn"></div> Skill used in this project
            </div>
            <div class="matrix-legend-item">
                <div class="legend-circle" style="background:#38bdf8;"></div> Highlighted project row
            </div>
            <div class="matrix-legend-item">
                <div class="legend-circle" style="background:#f472b6;"></div> Highlighted skill column
            </div>
        </div>
        <div class="matrix-tooltip"></div>
    </section>

    <!-- CONTACT SECTION -->
    <section id="contact" class="reveal">
        <h2>Contact / Get in Touch</h2>
        <p class="section-intro">
            If you are interested in my work or would like to discuss internship or junior creative opportunities,
            feel free to reach out directly.
        </p>
        <p><strong>Name:</strong> TSOI Yan Yan (Elaine Tsoi)</p>
        <p><strong>Mobile:</strong> <a href="tel:+85260694090">6069 4090</a></p>
        <p><strong>Email:</strong> <a href="mailto:caiyinyin27@gmail.com">caiyinyin27@gmail.com</a></p>
        <p style="margin-top:1rem;">
            I’m happy to share more project files, process notes, or discuss how I can support your team.
        </p>
    </section>
</main>

<!-- Scripts -->
<script src="scatterplot_animation.js"></script>

<!-- Pie chart for Advertising Skills -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const data = [
            { label: 'Brand Storytelling',   value: 32 },
            { label: 'Social Media Content', value: 25 },
            { label: 'Video Editing',        value: 18 },
            { label: 'Photography',          value: 15 },
            { label: 'UI / Visual Design',   value: 10 }
        ];

        const colors = d3.scaleOrdinal()
            .domain(data.map(d => d.label))
            .range(['#00FFFF', '#FF00FF', '#4CAF50', '#FFC300', '#9966FF']);

        const w = 500, h = 500, r = Math.min(w, h) / 2;
        const svg = d3.select('#pie-chart')
            .attr('width', w)
            .attr('height', h)
            .append('g')
            .attr('transform', `translate(${w / 2}, ${h / 2})`);

        const pie = d3.pie().sort(null).value(d => d.value);
        const arc = d3.arc().innerRadius(0).outerRadius(r);
        const arcHover = d3.arc().innerRadius(0).outerRadius(r + 10);

        const arcs = svg.selectAll('.arc')
            .data(pie(data))
            .enter()
            .append('g')
            .attr('class', 'arc');

        arcs.append('path')
            .attr('d', arc)
            .attr('fill', d => colors(d.data.label))
            .on('mouseover', function () {
                d3.select(this)
                    .transition()
                    .duration(150)
                    .attr('d', arcHover);
            })
            .on('mouseout', function () {
                d3.select(this)
                    .transition()
                    .duration(150)
                    .attr('d', arc);
            });

        arcs.append('text')
            .attr('transform', d => `translate(${arc.centroid(d)})`)
            .attr('dy', '.35em')
            .style('text-anchor', 'middle')
            .style('font-size', '12px')
            .style('fill', 'white')
            .style('font-weight', 'bold')
            .text(d => `${d.data.value}%`);

        const legend = d3.select('#pie-legend');
        const items = legend.selectAll('.legend-item')
            .data(data)
            .enter()
            .append('div')
            .attr('class', 'legend-item');

        items.append('div')
            .attr('class', 'color')
            .style('background-color', d => colors(d.label));

        items.append('span')
            .text(d => `${d.label} (${d.value}%)`);
    });
</script>

<!-- NEW: Advertising Skill Depth (Bar Chart) + Creative vs Strategic Radar -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        /* -------- Bar chart: Advertising Skill Depth -------- */
        const barData = [
            { label: 'Campaign Strategy',   value: 9 },
            { label: 'Brand Storytelling',  value: 9 },
            { label: 'Social Media Content',value: 8.5 },
            { label: 'Video Advertising',   value: 8 },
            { label: 'Data Visualisation',  value: 7.5 },
            { label: 'UI / Visual Design',  value: 7 }
        ];

        const barSvg = d3.select('#ad-bar-chart')
            .attr('viewBox', '0 0 800 420')
            .append('g')
            .attr('transform', 'translate(80,40)');

        const barWidth  = 800 - 80 - 60;
        const barHeight = 420 - 40 - 80;

        const xScale = d3.scaleBand()
            .domain(barData.map(d => d.label))
            .range([0, barWidth])
            .padding(0.25);

        const yScale = d3.scaleLinear()
            .domain([0, 10])
            .range([barHeight, 0])
            .nice();

        // Neon gradient for bars
        const barDefs = barSvg.append('defs');
        const barGradient = barDefs.append('linearGradient')
            .attr('id', 'barGradient')
            .attr('x1', '0%')
            .attr('y1', '100%')
            .attr('x2', '0%')
            .attr('y2', '0%');
        barGradient.append('stop').attr('offset', '0%').attr('stop-color', '#09203f');
        barGradient.append('stop').attr('offset', '50%').attr('stop-color', '#00ffff');
        barGradient.append('stop').attr('offset', '100%').attr('stop-color', '#ff00ff');

        // Axes
        barSvg.append('g')
            .attr('class', 'axis')
            .attr('transform', `translate(0,${barHeight})`)
            .call(d3.axisBottom(xScale))
            .selectAll('text')
            .attr('transform', 'rotate(-25)')
            .style('text-anchor', 'end')
            .style('font-size','10px');

        barSvg.append('g')
            .attr('class', 'axis')
            .call(d3.axisLeft(yScale).ticks(5));

        // Glow filter
        const filter = barDefs.append('filter')
            .attr('id', 'barGlow');
        filter.append('feGaussianBlur')
            .attr('stdDeviation', '3')
            .attr('result', 'coloredBlur');
        const feMerge = filter.append('feMerge');
        feMerge.append('feMergeNode').attr('in', 'coloredBlur');
        feMerge.append('feMergeNode').attr('in', 'SourceGraphic');

        // Bars with animation
        barSvg.selectAll('.bar')
            .data(barData)
            .enter()
            .append('rect')
            .attr('class', 'bar')
            .attr('x', d => xScale(d.label))
            .attr('width', xScale.bandwidth())
            .attr('y', barHeight)
            .attr('height', 0)
            .attr('fill', 'url(#barGradient)')
            .style('filter', 'url(#barGlow)')
            .transition()
            .duration(800)
            .delay((d,i) => i * 120)
            .attr('y', d => yScale(d.value))
            .attr('height', d => barHeight - yScale(d.value));

        // Value labels
        barSvg.selectAll('.bar-label')
            .data(barData)
            .enter()
            .append('text')
            .attr('class', 'chart-label')
            .attr('x', d => xScale(d.label) + xScale.bandwidth()/2)
            .attr('y', d => yScale(d.value) - 8)
            .attr('text-anchor', 'middle')
            .style('opacity', 0)
            .text(d => d.value.toFixed(1))
            .transition()
            .duration(600)
            .delay((d,i) => 500 + i * 120)
            .style('opacity', 1);

        /* -------- Radar chart: Creative vs Strategic Profile -------- */
        const radarData = [
            { axis: 'Strategy',      value: 9 },
            { axis: 'Concept',       value: 8.5 },
            { axis: 'Execution',     value: 8 },
            { axis: 'Data Insight',  value: 7.5 },
            { axis: 'Collaboration', value: 8.5 },
            { axis: 'Presentation',  value: 8.8 }
        ];

        const radarSvg = d3.select('#ad-radar-chart')
            .attr('viewBox', '0 0 800 420')
            .append('g')
            .attr('transform', 'translate(400,210)');

        const radarLevels = 4;
        const radarMax = 10;
        const radarRadius = 150;
        const angleSlice = (Math.PI * 2) / radarData.length;

        const rScale = d3.scaleLinear()
            .domain([0, radarMax])
            .range([0, radarRadius]);

        // Grid circles
        for (let lvl = 1; lvl <= radarLevels; lvl++) {
            radarSvg.append('circle')
                .attr('class', 'radar-grid-line')
                .attr('r', radarRadius * (lvl / radarLevels))
                .attr('fill', 'none');
        }

        // Axis lines + labels
        radarData.forEach((d, i) => {
            const angle = angleSlice * i - Math.PI/2;
            const x = Math.cos(angle) * radarRadius;
            const y = Math.sin(angle) * radarRadius;

            radarSvg.append('line')
                .attr('class', 'radar-axis-line')
                .attr('x1', 0)
                .attr('y1', 0)
                .attr('x2', x)
                .attr('y2', y);

            const labelOffset = 18;
            const lx = Math.cos(angle) * (radarRadius + labelOffset);
            const ly = Math.sin(angle) * (radarRadius + labelOffset);

            radarSvg.append('text')
                .attr('class', 'radar-label')
                .attr('x', lx)
                .attr('y', ly)
                .attr('text-anchor', lx >= 0 ? 'start' : 'end')
                .attr('dy', '0.35em')
                .text(d.axis);
        });

        // Radar area path
        const radarLine = d3.lineRadial()
            .radius(d => rScale(d.value))
            .angle((d,i) => i * angleSlice)
            .curve(d3.curveCardinalClosed);

        const radarPath = radarSvg.append('path')
            .datum(radarData)
            .attr('class', 'radar-area')
            .attr('d', radarLine)
            .attr('fill-opacity', 0)
            .attr('stroke-opacity', 0);

        radarPath
            .transition()
            .duration(900)
            .attr('fill-opacity', 1)
            .attr('stroke-opacity', 1);

        // Dots
        radarSvg.selectAll('.radar-dot')
            .data(radarData)
            .enter()
            .append('circle')
            .attr('class', 'radar-dot')
            .attr('r', 4)
            .attr('cx', (d,i) =>
                Math.cos(angleSlice * i - Math.PI/2) * rScale(d.value)
            )
            .attr('cy', (d,i) =>
                Math.sin(angleSlice * i - Math.PI/2) * rScale(d.value)
            )
            .style('opacity', 0)
            .transition()
            .duration(700)
            .delay((d,i) => 300 + i*120)
            .style('opacity', 1);

    });
</script>

<!-- NEW: Node-link skill network -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const width = 900;
        const height = 600;

        const svg = d3.select('#learning-svg')
            .attr('viewBox', `0 0 ${width} ${height}`)
            .attr('preserveAspectRatio', 'xMidYMid meet');

        const tooltip = document.querySelector('.learning-tooltip');

        const nodes = [
            { id: 'core',   label: 'Multimedia\nAdvertising Creator', type: 'core',
              detail: 'My core identity: combining strategy, content, visuals and data.' },

            { id: 'strategy', label: 'Strategy', type: 'cluster',
              detail: 'Campaign strategy, brand positioning and audience insight.' },
            { id: 'content',  label: 'Content & Story', type: 'cluster',
              detail: 'Brand stories, scripts, captions and narrative structure.' },
            { id: 'visual',   label: 'Visual & Motion', type: 'cluster',
              detail: 'Photography, video editing and motion for campaigns.' },
            { id: 'data',     label: 'Data & Tools', type: 'cluster',
              detail: 'Analytics, data viz and creative tools I use daily.' },

            { id: 'campaign', label: 'Campaign\nPlanning', type: 'leaf',
              detail: 'Designing objectives, key messages and roll-out plans.' },
            { id: 'positioning', label: 'Brand\nPositioning', type: 'leaf',
              detail: 'Defining why a brand matters in people’s lives.' },
            { id: 'audience', label: 'Audience\nInsight', type: 'leaf',
              detail: 'Understanding what people need, feel and expect.' },

            { id: 'copy', label: 'Copywriting\n& Slogans', type: 'leaf',
              detail: 'Writing lines that are clear, emotional and on-brand.' },
            { id: 'scripts', label: 'Video\nScripts', type: 'leaf',
              detail: 'Planning scenes and dialogue for short films and ads.' },
            { id: 'socialCopy', label: 'Social Media\nCaptions', type: 'leaf',
              detail: 'Short, engaging posts that match platform behaviour.' },

            { id: 'photo', label: 'Photography', type: 'leaf',
              detail: 'Light, shadow and composition for campaign visuals.' },
            { id: 'editing', label: 'Video Editing', type: 'leaf',
              detail: 'Rhythm, cuts and pacing for story and emotion.' },
            { id: 'layout', label: 'UI & Visual\nLayout', type: 'leaf',
              detail: 'Simple UI and layout for landing pages and previews.' },

            { id: 'analytics', label: 'Analytics\n& Metrics', type: 'leaf',
              detail: 'Reading performance data to adjust creative strategy.' },
            { id: 'dataviz', label: 'Data\nVisualisation', type: 'leaf',
              detail: 'Turning numbers into clear charts and visual stories.' },
            { id: 'tools', label: 'Tools:\nAdobe / Figma', type: 'leaf',
              detail: 'Practical tools: Premiere, Lightroom, Illustrator, Figma, etc.' }
        ];

        const links = [
            { source: 'core', target: 'strategy' },
            { source: 'core', target: 'content' },
            { source: 'core', target: 'visual' },
            { source: 'core', target: 'data' },

            { source: 'strategy', target: 'campaign' },
            { source: 'strategy', target: 'positioning' },
            { source: 'strategy', target: 'audience' },

            { source: 'content', target: 'copy' },
            { source: 'content', target: 'scripts' },
            { source: 'content', target: 'socialCopy' },

            { source: 'visual', target: 'photo' },
            { source: 'visual', target: 'editing' },
            { source: 'visual', target: 'layout' },

            { source: 'data', target: 'analytics' },
            { source: 'data', target: 'dataviz' },
            { source: 'data', target: 'tools' },

            { source: 'campaign', target: 'copy' },
            { source: 'campaign', target: 'editing' },
            { source: 'campaign', target: 'dataviz' },

            { source: 'socialCopy', target: 'analytics' },
            { source: 'layout', target: 'tools' }
        ];

        const link = svg.append('g')
            .attr('stroke-linecap', 'round')
            .selectAll('line')
            .data(links)
            .enter()
            .append('line')
            .attr('class', 'skill-link')
            .attr('stroke-opacity', 0.6);

        const nodeGroup = svg.append('g')
            .selectAll('g')
            .data(nodes)
            .enter()
            .append('g')
            .call(d3.drag()
                .on('start', (event, d) => {
                    if (!event.active) simulation.alphaTarget(0.3).restart();
                    d.fx = d.x;
                    d.fy = d.y;
                })
                .on('drag', (event, d) => {
                    d.fx = event.x;
                    d.fy = event.y;
                })
                .on('end', (event, d) => {
                    if (!event.active) simulation.alphaTarget(0);
                    d.fx = null;
                    d.fy = null;
                })
            );

        nodeGroup.append('circle')
            .attr('r', d => d.type === 'core' ? 28 : d.type === 'cluster' ? 22 : 16)
            .attr('class', d =>
                d.type === 'core' ? 'skill-node-core'
              : d.type === 'cluster' ? 'skill-node-cluster'
              : 'skill-node-leaf'
            );

        nodeGroup.append('text')
            .attr('class', 'skill-label')
            .attr('text-anchor', 'middle')
            .selectAll('tspan')
            .data(d => d.label.split('\n').map(line => ({ id: d.id, line })))
            .enter()
            .append('tspan')
            .attr('x', 0)
            .attr('dy', (d, i) => i === 0 ? 0 : 13)
            .text(d => d.line);

        nodeGroup
            .on('mouseover', (event, d) => {
                tooltip.style.opacity = '1';
                tooltip.textContent = d.detail;
            })
            .on('mousemove', (event) => {
                tooltip.style.left = (event.pageX + 12) + 'px';
                tooltip.style.top  = (event.pageY + 12) + 'px';
            })
            .on('mouseout', () => {
                tooltip.style.opacity = '0';
            });

        const simulation = d3.forceSimulation(nodes)
            .force('link', d3.forceLink(links).id(d => d.id).distance(d => {
                if (d.source.id === 'core' || d.target.id === 'core') return 140;
                if (d.source.type === 'cluster' || d.target.type === 'cluster') return 110;
                return 90;
            }))
            .force('charge', d3.forceManyBody().strength(-260))
            .force('center', d3.forceCenter(width / 2, height / 2))
            .force('collision', d3.forceCollide().radius(d =>
                d.type === 'core' ? 40 : d.type === 'cluster' ? 34 : 26
            ))
            .on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);

                nodeGroup.attr('transform', d => `translate(${d.x},${d.y})`);
            });
    });
</script>

<!-- Map with filter interaction -->
<script>
    const map = L.map('map').setView([34.5,108],4.5);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{
        attribution:'&copy; OpenStreetMap &copy; CARTO',
        subdomains:'abcd',maxZoom:20
    }).addTo(map);

    const categoryGroups = {
        attended: L.layerGroup().addTo(map),
        family: L.layerGroup().addTo(map),
        adventure: L.layerGroup().addTo(map)
    };

    function addGlowDot(lat,lng,color,category,r=6,op=.95,label=''){
        const marker = L.circleMarker([lat,lng],{
            color:'#000',
            weight:1.8,
            fillColor:color,
            fillOpacity:op,
            radius:r
        });
        categoryGroups[category].addLayer(marker);
        marker.addTo(map);
        if (marker._path) {
            marker._path.style.filter = `drop-shadow(0 0 6px ${color})`;
        } else {
            marker.on('add', () => {
                if (marker._path) {
                    marker._path.style.filter = `drop-shadow(0 0 6px ${color})`;
                }
            });
        }
        if(label) marker.bindTooltip(label,{
            permanent:false,
            direction:'top',
            offset:[0,-10],
            className:'custom-tooltip'
        });
    }

    function addDensityCluster(cLat,cLng,color,category,cnt=20,spread=.5,label=''){
        for(let i=0;i<cnt;i++){
            const oLat = (Math.random()-.5)*spread;
            const oLng = (Math.random()-.5)*spread;
            addGlowDot(cLat+oLat,cLng+oLng,color,category,3+Math.random()*3,.75+Math.random()*.2);
        }
        addGlowDot(cLat,cLng,color,category,11,1,label);
    }

    const places = {
        fujian:{lat:26.0750,lng:119.2951,label:"Fujian (Hometown)",color:'#FF00FF',density:28,category:'attended'},
        hongkong:{lat:22.3193,lng:114.1694,label:"Hong Kong (School)",color:'#FF00FF',density:15,category:'attended'},
        xian:{lat:34.3416,lng:108.9398,label:"Xi'an",color:'#00FFFF',category:'family'},
        beijing:{lat:39.9042,lng:116.4074,label:"Beijing",color:'#00FFFF',category:'family'},
        nanjing:{lat:32.0603,lng:118.7969,label:"Nanjing",color:'#00FFFF',category:'family'},
        luoyang:{lat:34.6630,lng:112.3890,label:"Luoyang",color:'#00FFFF',category:'family'},
        kaifeng:{lat:34.7973,lng:114.3074,label:"Kaifeng",color:'#00FFFF',category:'family'},
        hangzhou:{lat:30.2741,lng:120.1551,label:"Hangzhou",color:'#00FFFF',category:'family'},
        anyang:{lat:36.0976,lng:114.3923,label:"Anyang",color:'#00FFFF',category:'family'},
        zhengzhou:{lat:34.7578,lng:113.6654,label:"Zhengzhou",color:'#00FFFF',category:'family'},
        chengdu:{lat:30.5728,lng:104.0668,label:"Chengdu",color:'#00FFFF',category:'family'},
        chongqing:{lat:29.5630,lng:106.5516,label:"Chongqing",color:'#00FFFF',category:'family'},
        guangzhou:{lat:23.1291,lng:113.2644,label:"Guangzhou",color:'#00FFFF',category:'family'},
        guilin:{lat:25.2736,lng:110.2902,label:"Guilin",color:'#FF0000',category:'adventure'},
        suzhou:{lat:31.2990,lng:120.6196,label:"Suzhou",color:'#FF0000',category:'adventure'},
        kunming:{lat:25.0388,lng:102.7094,label:"Kunming",color:'#FF0000',category:'adventure'},
        zhangjiajie:{lat:29.1171,lng:110.4792,label:"Zhangjiajie",color:'#FF0000',category:'adventure'},
        sanya:{lat:18.2524,lng:109.5119,label:"Sanya",color:'#FF0000',category:'adventure'},
        xian_red:{lat:34.3416,lng:108.9398,label:"Xi'an (Adventure)",color:'#FF0000',category:'adventure'},
        hangzhou_red:{lat:30.2741,lng:120.1551,label:"Hangzhou (Adventure)",color:'#FF0000',category:'adventure'}
    };

    addDensityCluster(
        places.fujian.lat,
        places.fujian.lng,
        places.fujian.color,
        places.fujian.category,
        places.fujian.density,
        .7,
        places.fujian.label
    );
    addDensityCluster(
        places.hongkong.lat,
        places.hongkong.lng,
        places.hongkong.color,
        places.hongkong.category,
        places.hongkong.density,
        .18,
        places.hongkong.label
    );

    [
        places.xian,places.beijing,places.nanjing,places.luoyang,places.kaifeng,
        places.hangzhou,places.anyang,places.zhengzhou,places.chengdu,
        places.chongqing,places.guangzhou
    ].forEach(p=>addGlowDot(p.lat,p.lng,p.color,p.category,7,.95,p.label));

    [
        places.guilin,places.suzhou,places.kunming,places.zhangjiajie,
        places.sanya,places.xian_red,places.hangzhou_red
    ].forEach(p=>addGlowDot(p.lat,p.lng,p.color,p.category,7,.95,p.label));

    // 图例点击过滤
    document.querySelectorAll('.legend-item').forEach(item => {
        const category = item.getAttribute('data-category');
        let visible = true;
        item.addEventListener('click', () => {
            visible = !visible;
            if (visible) {
                categoryGroups[category].addTo(map);
            } else {
                map.removeLayer(categoryGroups[category]);
            }
            item.classList.toggle('legend-off', !visible);
        });
    });
</script>

<!-- NEW Matrix: Projects × Skills -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const rowHeaders = [
            "Dyson High-Tech Concept",
            "Samsung Concept Document",
            "Lee Kum Kee Campaign Plan",
            "CanPrev Hya-Love Poster",
            "Doughnut Backpack Campaign",
            "Hong Kong Cheongsam Video",
            "The Story of Clones",
            "The Beauty of Banyan Trees"
        ];
        const colHeaders = [
            "Campaign Strategy",
            "Brand Storytelling",
            "Copywriting",
            "Social Media",
            "Video Editing",
            "Photography",
            "Data Visualisation",
            "UI Design"
        ];

        const edges = [
            // Dyson
            { project: "Dyson High-Tech Concept",    skill: "Campaign Strategy" },
            { project: "Dyson High-Tech Concept",    skill: "Brand Storytelling" },
            { project: "Dyson High-Tech Concept",    skill: "Copywriting" },
            { project: "Dyson High-Tech Concept",    skill: "UI Design" },

            // Samsung
            { project: "Samsung Concept Document",   skill: "Campaign Strategy" },
            { project: "Samsung Concept Document",   skill: "Brand Storytelling" },
            { project: "Samsung Concept Document",   skill: "Copywriting" },
            { project: "Samsung Concept Document",   skill: "Data Visualisation" },

            // Lee Kum Kee
            { project: "Lee Kum Kee Campaign Plan",  skill: "Campaign Strategy" },
            { project: "Lee Kum Kee Campaign Plan",  skill: "Brand Storytelling" },
            { project: "Lee Kum Kee Campaign Plan",  skill: "Copywriting" },
            { project: "Lee Kum Kee Campaign Plan",  skill: "Social Media" },
            { project: "Lee Kum Kee Campaign Plan",  skill: "Data Visualisation" },

            // CanPrev Hya-Love
            { project: "CanPrev Hya-Love Poster",    skill: "Brand Storytelling" },
            { project: "CanPrev Hya-Love Poster",    skill: "Copywriting" },
            { project: "CanPrev Hya-Love Poster",    skill: "Data Visualisation" },
            { project: "CanPrev Hya-Love Poster",    skill: "UI Design" },

            // Doughnut
            { project: "Doughnut Backpack Campaign", skill: "Campaign Strategy" },
            { project: "Doughnut Backpack Campaign", skill: "Brand Storytelling" },
            { project: "Doughnut Backpack Campaign", skill: "Social Media" },
            { project: "Doughnut Backpack Campaign", skill: "Photography" },
            { project: "Doughnut Backpack Campaign", skill: "UI Design" },

            // Cheongsam video
            { project: "Hong Kong Cheongsam Video",  skill: "Brand Storytelling" },
            { project: "Hong Kong Cheongsam Video",  skill: "Copywriting" },
            { project: "Hong Kong Cheongsam Video",  skill: "Video Editing" },
            { project: "Hong Kong Cheongsam Video",  skill: "Photography" },

            // Clones short film
            { project: "The Story of Clones",        skill: "Brand Storytelling" },
            { project: "The Story of Clones",        skill: "Copywriting" },
            { project: "The Story of Clones",        skill: "Video Editing" },

            // Banyan documentary
            { project: "The Beauty of Banyan Trees", skill: "Brand Storytelling" },
            { project: "The Beauty of Banyan Trees", skill: "Video Editing" },
            { project: "The Beauty of Banyan Trees", skill: "Photography" },
            { project: "The Beauty of Banyan Trees", skill: "Data Visualisation" }
        ];

        const rows = rowHeaders.length;
        const cols = colHeaders.length;
        const matrix = Array(rows).fill().map(() => Array(cols).fill(0));

        edges.forEach(edge => {
            const i = rowHeaders.indexOf(edge.project);
            const j = colHeaders.indexOf(edge.skill);
            if (i !== -1 && j !== -1) {
                matrix[i][j] = 1;
            }
        });

        const container = document.getElementById('matrix-container');
        const table = document.createElement('table');
        table.id = 'matrix-table';

        // Header row
        const headerRow = document.createElement('tr');
        const corner = document.createElement('th');
        corner.textContent = '';
        headerRow.appendChild(corner);

        colHeaders.forEach((colName, j) => {
            const th = document.createElement('th');
            th.textContent = colName;
            th.dataset.colIndex = j;
            headerRow.appendChild(th);
        });
        table.appendChild(headerRow);

        // Body rows
        rowHeaders.forEach((rowName, i) => {
            const row = document.createElement('tr');

            const rowHeader = document.createElement('th');
            rowHeader.className = 'branch-node';
            rowHeader.textContent = rowName;
            rowHeader.dataset.rowIndex = i;
            row.appendChild(rowHeader);

            colHeaders.forEach((colName, j) => {
                const cell = document.createElement('td');
                if (matrix[i][j] === 1) {
                    cell.classList.add('connected');
                    cell.textContent = '1';
                    cell.setAttribute('data-tooltip', `${rowName} × ${colName}`);
                    cell.dataset.rowIndex = i;
                    cell.dataset.colIndex = j;
                } else {
                    cell.textContent = '';
                }
                row.appendChild(cell);
            });

            table.appendChild(row);
        });

        container.appendChild(table);

        const tooltip = document.querySelector('.matrix-tooltip');

        // Cell tooltips
        document.querySelectorAll('#matrix-table td.connected').forEach(cell => {
            cell.addEventListener('mouseover', (e) => {
                tooltip.style.opacity = '1';
                tooltip.textContent = cell.getAttribute('data-tooltip');
                tooltip.style.left = `${e.pageX + 12}px`;
                tooltip.style.top = `${e.pageY + 12}px`;
            });
            cell.addEventListener('mousemove', (e) => {
                tooltip.style.left = `${e.pageX + 12}px`;
                tooltip.style.top = `${e.pageY + 12}px`;
            });
            cell.addEventListener('mouseout', () => {
                tooltip.style.opacity = '0';
            });
        });

        // Row / column highlighting
        const clearHighlights = () => {
            table.querySelectorAll('tr').forEach(tr => tr.classList.remove('row-highlight'));
            table.querySelectorAll('th, td').forEach(td => td.classList.remove('col-highlight'));
        };

        // Row headers click
        table.querySelectorAll('th.branch-node').forEach(th => {
            th.addEventListener('click', () => {
                const idx = parseInt(th.dataset.rowIndex, 10);
                const row = table.rows[idx + 1]; // +1 because of header row
                const isActive = row.classList.contains('row-highlight');

                clearHighlights();
                if (!isActive) {
                    row.classList.add('row-highlight');
                }
            });
        });

        // Column headers click
        table.querySelectorAll('#matrix-table tr:first-child th:not(:first-child)').forEach(th => {
            th.addEventListener('click', () => {
                const idx = parseInt(th.dataset.colIndex, 10);
                const isActive = th.classList.contains('col-highlight');

                clearHighlights();
                if (!isActive) {
                    th.classList.add('col-highlight');
                    for (let r = 1; r < table.rows.length; r++) {
                        const cell = table.rows[r].cells[idx + 1]; // +1 due to row header
                        cell.classList.add('col-highlight');
                    }
                }
            });
        });
    });
</script>

<!-- Global interactions: scroll reveal, scrollspy, CV toggle, card hover tilt -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Scroll reveal
        const revealEls = document.querySelectorAll('.reveal');
        const io = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    io.unobserve(entry.target);
                }
            });
        }, { threshold: 0.18 });
        revealEls.forEach(el => io.observe(el));

        // Scrollspy for nav
        const navLinks = document.querySelectorAll('nav a.subpage[href^="#"]');
        const sections = Array.from(document.querySelectorAll('main section, header'));

        function onScroll() {
            const scrollPos = window.scrollY + 120;
            let currentId = '';
            sections.forEach(sec => {
                const top = sec.offsetTop;
                const height = sec.offsetHeight;
                if (scrollPos >= top && scrollPos < top + height) {
                    currentId = sec.id;
                }
            });
            navLinks.forEach(link => {
                const href = link.getAttribute('href');
                if (href.startsWith('#')) {
                    const id = href.substring(1);
                    link.classList.toggle('active', id === currentId);
                }
            });
        }
        window.addEventListener('scroll', onScroll);
        onScroll();

        // Smooth scroll for nav links
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                if (href.startsWith('#')) {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            });
        });

        // CV toggle
        const cvButton = document.getElementById('cv');
        const cvSection = document.getElementById('cv-section');
        let cvVisible = false;
        if (cvButton && cvSection) {
            cvSection.style.maxHeight = '0';
            cvSection.style.overflow = 'hidden';
            cvSection.style.opacity = '0';
            cvSection.classList.remove('visible');
            cvButton.addEventListener('click', (e) => {
                e.preventDefault();
                cvVisible = !cvVisible;
                if (cvVisible) {
                    cvSection.style.display = 'block';
                    const fullHeight = cvSection.scrollHeight;
                    cvSection.style.maxHeight = fullHeight + 'px';
                    cvSection.style.opacity = '1';
                    cvSection.classList.add('visible');
                    cvSection.scrollIntoView({ behavior: 'smooth' });
                } else {
                    cvSection.style.maxHeight = '0';
                    cvSection.style.opacity = '0';
                    setTimeout(() => {
                        if (!cvVisible) cvSection.style.display = 'none';
                    }, 400);
                }
            });
        }

        // "Jump to data stories" button
        const dataBtn = document.getElementById('scroll-to-data');
        const dataSection = document.getElementById('data-stories');
        if (dataBtn && dataSection) {
            dataBtn.addEventListener('click', () => {
                dataSection.scrollIntoView({ behavior: 'smooth' });
            });
        }

        // Simple tilt effect on hero image
        document.querySelectorAll('.tilt').forEach(el => {
            const strength = 10;
            el.addEventListener('mousemove', (e) => {
                const rect = el.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                const rotateX = (+1) * (y / rect.height) * strength;
                const rotateY = (-1) * (x / rect.width) * strength;
                el.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.03)`;
            });
            el.addEventListener('mouseleave', () => {
                el.style.transform = 'rotateX(0deg) rotateY(0deg) scale(1)';
            });
        });
    });
</script>

</body>
</html>
